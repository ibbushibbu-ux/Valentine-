<script>
let step = 0;

function nextStep(){
    const text = document.getElementById("text");
    step++;

    if(step === 1){
        text.innerHTML = "Analyzing 4 months of excessive talking...";
    }
    else if(step === 2){
        text.innerHTML = "Detected: Dangerous levels of teasing about food intake.";
    }
    else if(step === 3){
        text.innerHTML = "Warning: Subject claims boyfriend has bigger üçë than her.";
    }
    else if(step === 4){
        text.innerHTML = "System note: He may burst one day due to eating too much.";
    }
    else if(step === 5){
        text.innerHTML = "However...";
    }
    else if(step === 6){
        text.innerHTML = "Detected: Laughing too much together.";
    }
    else if(step === 7){
        text.innerHTML = "Detected: Daily talking addiction.";
    }
    else if(step === 8){
        text.innerHTML = "Detected: Slightly obvious feelings developing.";
    }
    else if(step === 9){
        text.innerHTML = "Final Recommendation:";
    }
    else if(step === 10){
        text.innerHTML = "Upgrade relationship status to: Valentine Mode üíñ";
        document.getElementById("nextBtn").style.display = "none";
        showFinal();
    }
}

function showFinal(){
    const box = document.getElementById("box");

    const yesBtn = document.createElement("button");
    yesBtn.innerHTML = "Approve Upgrade üòå";
    yesBtn.id = "yesBtn";
    yesBtn.onclick = function(){
        launchFinal();
    };

    const noBtn = document.createElement("button");
    noBtn.innerHTML = "Reject Upgrade üôÑ";
    noBtn.id = "noBtn";
    noBtn.style.position = "absolute";
    noBtn.onmouseover = moveNo;
    noBtn.ontouchstart = moveNo;

    box.appendChild(yesBtn);
    box.appendChild(noBtn);
}

function moveNo(){
    const noBtn = document.getElementById("noBtn");
    const x = Math.random() * (window.innerWidth - 120);
    const y = Math.random() * (window.innerHeight - 60);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
}

function launchFinal(){
    const box = document.getElementById("box");
    const music = document.getElementById("music");

    music.play();

    document.body.style.background = "linear-gradient(135deg,#ff4e88,#ff99ac)";
    document.body.style.color = "white";

    box.innerHTML = `
        <h2 style="animation:glow 2s infinite alternate;">Upgrade Successful ‚ù§Ô∏è</h2>
        <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" width="220" style="margin-top:15px;border-radius:15px;">
        <p style="margin-top:20px;">
        And yes‚Ä¶ I may eat a lot.  
        And maybe I do have a bigger üçë.  
        But for the past 4 months,  
        my favorite part of my day has been talking to you.
        </p>
        <h2 style="margin-top:15px;">Sadaf, will you be my Valentine? üíñ</h2>
        <p style="font-size:14px;opacity:0.8;margin-top:10px;">
        (P.S. I promise not to burst. At least not before our next meal together.)
        </p>
    `;

    confetti();
}

function confetti(){
    for(let i=0;i<80;i++){
        let div = document.createElement("div");
        div.style.position="absolute";
        div.style.width="8px";
        div.style.height="8px";
        div.style.background="white";
        div.style.left=Math.random()*window.innerWidth+"px";
        div.style.top="-10px";
        div.style.opacity=Math.random();
        div.style.animation="fall 3s linear forwards";
        document.body.appendChild(div);
    }
}

const style = document.createElement('style');
style.innerHTML = `
@keyframes fall {
    to { transform: translateY(100vh); opacity:0; }
}
@keyframes glow {
    from { text-shadow:0 0 10px white; }
    to { text-shadow:0 0 25px white; }
}`;
document.head.appendChild(style);
</script>
